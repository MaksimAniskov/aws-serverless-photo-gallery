{"version":3,"sources":["data/index.tsx","graphql/queries.ts","components/Note.tsx","utils/index.ts","components/Gallery.tsx","components/FolderCard.tsx","components/ImageCard.tsx","components/Folders.tsx","App.tsx","serviceWorker.js","index.js"],"names":["ActionType","getSignedCookies","reducer","state","action","type","folderName","Object","objectSpread","nextToken","undefined","subfolders","images","hasMoreImages","loading","isLoading","loaded","error","clearError","addImages","concat","StateContext","React","createContext","StateProvider","props","react_default","a","createElement","Provider","value","useReducer","children","useContext","useFetchSubfoldersAndSomeImages","_ref","asyncToGenerator","regenerator_default","mark","_callee","context","_context","dispatch","wrap","_context2","prev","next","slicedToArray","abrupt","performQuery","slice","ListSubfoldersAndImagesQuery","stop","_x","_x2","apply","this","arguments","useFetchMoreImages","_ref2","_callee2","_context3","_context4","console","_x3","_callee3","query","_context5","params","result","foldersData","imagesData","_context6","path","API","graphql","graphqlOperation","sent","data","listSubfolders","filter","folder","listImages","items","item","map","url","t0","finish","Note","className","caption","base64encode","str","btoa","toConsumableArray","c","i","code","charCodeAt","toString","padStart","join","Gallery","swipe","_context$","_React$useState","useState","width","height","_React$useState2","windowDimensions","setWindowDimensions","updateWindowDimensions","window","innerWidth","innerHeight","useEffect","addEventListener","removeEventListener","react_easy_swipe_lib_default","onSwipeMove","position","onSwipeEnd","x","react_keyboard_event_handler_default","handleKeys","onKeyEvent","key","e","components_Note","length","index","src","generateImageUrl","alt","onNoPhotos","image","imgDimensions","approximateDimension","Math","max","floor","approximateWindowsDimensions","utils","JSON","stringify","edits","resize","fit","preventDefault","history","push","location","pathname","FolderCard","Card","onClick","Body","Text","ImageCard","bg","Img","variant","Folders","subfoldersToDisplay","FOLDER_LEVEL_UP","react_infinite_scroller_default","initialLoad","loadMore","hasMore","loader","CardDeck","subfolder","components_FolderCard","onChangeFolderIntent","components_ImageCard","onSwitchToViewingIntent","Amplify","configure","AWS_EXPORTS","App","_useState","_useState2","isSignedIn","setIsSignedIn","_data$useContext","dist","hide","Greetings","ConfirmSignIn","SignUp","ConfirmSignUp","TOTPSetup","AUTH_UI_OPTIONS","hideForgotPassword","ForgotPassword","onStateChange","authState","setSignedCookies","react_contexify_lib","id","react_router_dom","react_router","render","search","components_Folders","decodeURIComponent","newPath","lastIndexOf","encodeURIComponent","components_Gallery","parseInt","_ref3","Auth","signOut","_setSignedCookies","forEach","nameValuePair","cookies","set","name","secure","withCookies","data_StateProvider","App_App","Boolean","hostname","match","ReactDOM","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.d2858647.chunk.js","sourcesContent":["import React from 'react';\nimport { API, graphqlOperation } from 'aws-amplify';\n// eslint-disable-next-line no-unused-vars\nimport { GraphQLResult } from '@aws-amplify/api/lib/types';\n\n// eslint-disable-next-line no-unused-vars\nimport { ListSubfoldersQuery, ListImagesQuery } from '../API';\nimport { listImages } from '../graphql/queries';\n\ninterface IState {\n    isLoading: boolean,\n    error?: string,\n    folderName?: string,\n    subfolders: string[],\n    images: string[],\n    nextToken?: string,\n    hasMoreImages: boolean\n}\n\nenum ActionType {\n    // eslint-disable-next-line no-unused-vars\n    loading = 'loading',\n    // eslint-disable-next-line no-unused-vars\n    loaded = 'loaded',\n    // eslint-disable-next-line no-unused-vars\n    error = 'error',\n    // eslint-disable-next-line no-unused-vars\n    clearError = 'clearError',\n    // eslint-disable-next-line no-unused-vars\n    folderName = 'folderName',\n    // eslint-disable-next-line no-unused-vars\n    subfolders = 'subfolders',\n    // eslint-disable-next-line no-unused-vars\n    addImages = 'addImages',\n    // eslint-disable-next-line no-unused-vars\n    nextToken = 'nextToken'\n}\n\ntype Action =\n    | {\n        type: ActionType.loading\n    }\n    | {\n        type: ActionType.loaded\n    }\n    | {\n        type: ActionType.error,\n        error: string\n    }\n    | {\n        type: ActionType.clearError\n    }\n    | {\n        type: ActionType.folderName,\n        folderName: string\n    }\n    | {\n        type: ActionType.subfolders,\n        subfolders: string[]\n    }\n    | {\n        type: ActionType.addImages,\n        images: string[]\n    }\n    | {\n        type: ActionType.nextToken,\n        nextToken?: string\n    }\n\ntype Context = [IState, React.Dispatch<Action>];\n\nconst reducer = (state: IState, action: Action): IState => {\n    switch (action.type) {\n        case ActionType.folderName:\n            return {\n                ...state,\n                folderName: action.folderName,\n                nextToken: undefined,\n                subfolders: [],\n                images: [],\n                hasMoreImages: false\n            };\n        case ActionType.loading: return { ...state, isLoading: true };\n        case ActionType.loaded: return { ...state, isLoading: false };\n        case ActionType.error: return { ...state, error: action.error };\n        case ActionType.clearError: return { ...state, error: undefined };\n        case ActionType.subfolders: return { ...state, subfolders: action.subfolders };\n        case ActionType.addImages: return { ...state, images: state.images.concat(action.images) };\n        case ActionType.nextToken:\n            return {\n                ...state,\n                nextToken: action.nextToken,\n                hasMoreImages: !!action.nextToken\n            };\n        default: return state;\n    }\n};\n\nconst StateContext = React.createContext<Context>(null as unknown as Context);\n\nexport const StateProvider: React.FunctionComponent<{}> = (props) => {\n    const initialState: IState = {\n        subfolders: [],\n        images: [],\n        isLoading: false,\n        hasMoreImages: false,\n    };\n    return (\n        <StateContext.Provider\n            value={React.useReducer<React.Reducer<IState, Action>>(reducer, initialState)}\n        >\n            {props.children}\n        </StateContext.Provider>\n    );\n};\n\nexport const useContext = () => React.useContext(StateContext);\n\nexport const useFetchSubfoldersAndSomeImages = async (context: Context, folderName: string) => {\n    const [state, dispatch] = context;\n    if (folderName === state.folderName) {\n        return;\n    }\n    dispatch({ type: ActionType.folderName, folderName });\n    await performQuery(context, folderName.slice(1), ListSubfoldersAndImagesQuery);\n}\n\nexport const useFetchMoreImages = async (context: Context) => {\n    const [state] = context;\n    if (state.isLoading) return;\n    if (!state.folderName) {\n        console.error('Call useFetchSubfoldersAndSomeImages before calling useFetchMoreImages');\n        return;\n    }\n    await performQuery(context, state.folderName.slice(1), listImages);\n}\n\nasync function performQuery(context: Context, folderName: string, query: string) {\n    const [state, dispatch] = context;\n\n    dispatch({ type: ActionType.loading });\n    dispatch({ type: ActionType.clearError });\n\n    try {\n        const params = {\n            path: folderName,\n            nextToken: state.nextToken\n        };\n        const result = await API.graphql(graphqlOperation(query, params)) as GraphQLResult;\n\n        const foldersData = (result.data as ListSubfoldersQuery).listSubfolders;\n        if (foldersData) {\n            dispatch({\n                type: ActionType.subfolders,\n                subfolders: (foldersData as string[]).filter(folder => folder !== '')\n            });\n        }\n\n        const imagesData = (result.data as ListImagesQuery).listImages;\n        if (imagesData) {\n            if (imagesData.items) {\n                dispatch({\n                    type: ActionType.addImages,\n                    images: imagesData.items\n                        .filter(item => !!item)\n                        .map(item => item!.url) as string[]\n                });\n            }\n            dispatch({\n                type: ActionType.nextToken,\n                nextToken: imagesData.nextToken ? imagesData.nextToken : undefined\n            });\n        }\n    } catch (result) {\n        console.error(result);\n        dispatch({ type: ActionType.error, error: 'Oops... Something went wrong.' });\n    } finally {\n        dispatch({ type: ActionType.loaded });\n    }\n}\n\nconst ListSubfoldersAndImagesQuery = `query ListSubfoldersAndImages($path: String) {\n    listSubfolders(path: $path),\n    listImages(path: $path) {\n        items {\n          url\n        }\n        nextToken\n    }\n  }`;\n","// tslint:disable\n// this is an auto generated file. This will be overwritten\n\nexport const listImages = `query ListImages($path: String, $limit: Int, $nextToken: String) {\n  listImages(path: $path, limit: $limit, nextToken: $nextToken) {\n    items {\n      url\n    }\n    nextToken\n  }\n}\n`;\nexport const listSubfolders = `query ListSubfolders($path: String) {\n  listSubfolders(path: $path)\n}\n`;\nexport const getSignedCookies = `query GetSignedCookies {\n  getSignedCookies {\n    name\n    value\n  }\n}\n`;\n","import React from 'react';\n\ninterface Props {\n    caption: string\n}\n\nconst Note: React.FunctionComponent<Props> = (props) => {\n    return (\n        <div className=\"note\">\n            {props.caption}\n        </div>\n    );\n}\n\nexport default Note;\n","export function base64encode(str: string) {\n    return btoa(\n        [...str].map((c, i) => {\n            const code = c.charCodeAt(0);\n            if (code <= 127) {\n                return c;\n            }\n            return '\\\\u' + code.toString(16).padStart(4, '0');\n        }).join(''));\n}\n","import React from 'react';\nimport KeyboardEventHandler from 'react-keyboard-event-handler';\nimport Swipe from 'react-easy-swipe';\n\nimport * as data from '../data';\nimport Note from './Note';\n\nimport * as utils from \"../utils\";\n\ninterface Props {\n    path: string,\n    index: number,\n    onNoPhotos?: () => void,\n    history: any\n}\n\nconst Gallery: React.FunctionComponent<Props> = (props) => {\n\n    const context = data.useContext();\n    const [{ isLoading, images, hasMoreImages }] = context;\n\n    const [windowDimensions, setWindowDimensions] = React.useState({ width: 0, height: 0 });\n    React.useEffect(\n        () => {\n            window.addEventListener('resize', updateWindowDimensions);\n            updateWindowDimensions();\n            data.useFetchSubfoldersAndSomeImages(context, props.path);\n\n            return () => {\n                window.removeEventListener('resize', updateWindowDimensions);\n            };\n        },\n        [context, props.path]\n    );\n\n    function updateWindowDimensions() {\n        setWindowDimensions({ width: window.innerWidth, height: window.innerHeight });\n    }\n\n    type TSwipeMove = { x: number };\n    let swipe: TSwipeMove;\n    return (\n        <Swipe\n            onSwipeMove={(position: TSwipeMove) => { swipe = position }}\n            onSwipeEnd={() => swipe.x < 0 ? next() : prev()}\n        >\n            <KeyboardEventHandler handleKeys={['right', 'down', 'pagedown', 'space', 'enter']}\n                onKeyEvent={(key: any, e: React.SyntheticEvent) => next(e)} />\n            < KeyboardEventHandler handleKeys={['left', 'up', 'pageup']}\n                onKeyEvent={(key: any, e: React.SyntheticEvent) => prev(e)} />\n\n            {(() => {\n                if (isLoading) return <Note caption=\"Loading...\" />;\n                if (!images.length) {\n                    props.onNoPhotos && props.onNoPhotos();\n                    return <Note caption=\"No photos\" />;\n                }\n                if (props.index >= images.length) {\n                    return <Note caption=\"The end\" />;\n                } else {\n                    return (\n                        <div>\n                            <img\n                                src={generateImageUrl(images[props.index])}\n                                className=\"center\"\n                                alt={images[props.index]}\n                            />\n\n                            { // Hidden next photo to force caching it upfront\n                                props.index + 1 < images.length &&\n                                <img width=\"0\" height=\"0\"\n                                    src={generateImageUrl(images[props.index+1])}\n                                    alt={''}\n                                />\n                            }\n                            { // Hidden prev photo to force caching it upfront\n                                props.index > 0 &&\n                                <img width=\"0\" height=\"0\"\n                                    src={generateImageUrl(images[props.index-1])}\n                                    alt={''}\n                                />\n                            }\n                        </div>\n                    );\n                }\n            })()}\n        </Swipe>\n    );\n\n    function generateImageUrl(image: string) {\n        const imgDimensions = approximateWindowsDimensions();\n        return '/image/' +\n            utils.base64encode(JSON.stringify({\n                key: image,\n                edits: { resize: { width: imgDimensions.width, height: imgDimensions.height, fit: 'contain' } }\n            }));\n    }\n\n    function prev(e?: React.SyntheticEvent) {\n        e && e.preventDefault();\n        if (props.index > 0) {\n            props.history.push(props.history.location.pathname + '?' + (props.index - 1));\n        }\n    }\n\n    function next(e?: React.SyntheticEvent) {\n        e && e.preventDefault();\n        if (props.index >= images.length) {\n            return;\n        } else if (props.index + 1 >= images.length && hasMoreImages) {\n            data.useFetchMoreImages(context);\n        }\n        props.history.push(props.history.location.pathname + '?' + (props.index + 1));\n    }\n\n    function approximateWindowsDimensions() {\n        return {\n            width: approximateDimension(windowDimensions.width),\n            height: approximateDimension(windowDimensions.height)\n        };\n\n        function approximateDimension(value: number) {\n            return Math.max(100, Math.floor(value / 50) * 50);\n        }\n\n    }\n\n}\n\nexport default Gallery;\n","import React from 'react';\nimport { Card } from \"react-bootstrap\";\n\ninterface Props {\n    folderName: string,\n    onClick: () => void,\n    className?: string\n}\n\nconst FolderCard: React.FunctionComponent<Props> = (props) => {\n    return (\n        <Card onClick={props.onClick} className={props.className}>\n            <Card.Body>\n                <Card.Text>{props.folderName}</Card.Text>\n            </Card.Body>\n        </Card>\n    );\n}\n\nexport default FolderCard;","import React from 'react';\nimport { Card } from \"react-bootstrap\";\nimport * as utils from \"../utils\";\n\ninterface Props {\n    url: string,\n    onClick: () => void\n}\n\nconst ImageCard: React.FunctionComponent<Props> = (props) => {\n    return (\n        <Card\n            bg=\"secondary\"\n            onClick={props.onClick}\n        >\n            <Card.Img\n                src={'/image/' + utils.base64encode(JSON.stringify({\n                    key: props.url,\n                    edits: { resize: { width: 240, height: 240 } }\n                }))}\n                variant=\"top\"\n            />\n        </Card>\n    );\n}\n\nexport default ImageCard;\n","import React, { useEffect } from 'react';\nimport { CardDeck } from \"react-bootstrap\";\nimport InfiniteScroll from 'react-infinite-scroller';\n\nimport * as data from '../data';\nimport Note from './Note';\nimport FolderCard from './FolderCard';\nimport ImageCard from './ImageCard';\n\ninterface Props {\n    path: string,\n    onChangeFolderIntent?: (folderName: string) => void,\n    onSwitchToViewingIntent: (index: number) => void\n}\n\nconst Folders: React.FunctionComponent<Props> = (props) => {\n    const context = data.useContext();\n    useEffect(() => {\n        data.useFetchSubfoldersAndSomeImages(context, props.path);\n    });\n\n    const [{ subfolders, isLoading, images, hasMoreImages }] = context;\n    let subfoldersToDisplay = subfolders;\n    if (props.path !== '/') {\n        subfoldersToDisplay = ([FOLDER_LEVEL_UP]).concat(subfolders);\n    }\n\n    return (\n        (isLoading && !hasMoreImages) ?\n            <Note caption=\"Loading...\" />\n            :\n            <InfiniteScroll\n                className=\"folder-browser\"\n                initialLoad={false}\n                loadMore={() => data.useFetchMoreImages(context)}\n                hasMore={hasMoreImages}\n                loader={<Note key={0} caption=\"Loading...\" />}\n            >\n                <CardDeck className=\"folders\">\n                    {subfoldersToDisplay.map(subfolder => (\n                        <FolderCard\n                            className={subfolder === FOLDER_LEVEL_UP ? 'level-up' : undefined}\n                            key={subfolder}\n                            folderName={subfolder}\n                            onClick={() => props && props.onChangeFolderIntent && props.onChangeFolderIntent(subfolder)}\n                        />\n                    ))}\n                </CardDeck>\n                <CardDeck className=\"images\">\n                    {images.map((image, i) => {\n                        return (\n                            <ImageCard\n                                key={image}\n                                url={image}\n                                onClick={() => props.onSwitchToViewingIntent(i)}\n                            />\n                        );\n                    })}\n              </CardDeck>\n            </InfiniteScroll>\n    );\n}\n\nexport default Folders;\n\nexport const FOLDER_LEVEL_UP = 'â‡–';\n","import React, { useState } from 'react';\nimport Amplify, { API, graphqlOperation } from 'aws-amplify';\nimport {\n  Authenticator,\n  Greetings,\n  ConfirmSignIn,\n  SignUp,\n  ConfirmSignUp,\n  TOTPSetup,\n  ForgotPassword\n} from 'aws-amplify-react';\nimport { Menu, Item, Separator, MenuProvider } from 'react-contexify';\nimport 'react-contexify/dist/ReactContexify.min.css';\nimport { HashRouter as Router, Route } from 'react-router-dom';\nimport { withCookies } from 'react-cookie';\n\nimport { GetSignedCookiesQuery } from './API';\nimport { getSignedCookies } from './graphql/queries';\nimport { GraphQLResult } from '@aws-amplify/api/lib/types';\nimport './App.css';\nimport Gallery from './components/Gallery';\nimport Folders, { FOLDER_LEVEL_UP } from './components/Folders';\nimport Note from './components/Note';\nimport * as data from './data';\n\ndeclare global {\n  interface Window {\n    AWS_EXPORTS: {\n      aws_project_region: string;\n      aws_appsync_graphqlEndpoint: string;\n      aws_appsync_authenticationType: string;\n      aws_user_pools_id:  string;\n      aws_user_pools_web_client_id: string;\n    };\n    AUTH_UI_OPTIONS?: {\n      hideForgotPassword: boolean;\n    };\n  }\n}\nAmplify.configure(window.AWS_EXPORTS);\n\ninterface Props {\n  cookies: any\n}\n\nconst App: React.FunctionComponent<Props> = (props) => {\n\n  const [isSignedIn, setIsSignedIn] = useState<boolean>(false);\n\n  const [{ error }] = data.useContext();\n  if (error) return <Note caption={error} />;\n  return (\n    <Authenticator\n      hide={[\n        Greetings,\n        ConfirmSignIn,\n        SignUp,\n        ConfirmSignUp,\n        TOTPSetup\n      ].concat(window.AUTH_UI_OPTIONS && window.AUTH_UI_OPTIONS.hideForgotPassword ? [ForgotPassword] : [])}\n      onStateChange={async (authState: string) => {\n        if (authState === 'signedIn') {\n          await setSignedCookies();\n          setIsSignedIn(true);\n        }\n      }}\n    >\n      {isSignedIn &&\n        <MenuProvider id=\"menu\">\n          <Router>\n            <Route render={({ history }) => {\n              const path: string = history.location.pathname;\n              if (history.location.search === '?browse') {\n                return (\n                  <Folders\n                    path={decodeURIComponent(path)}\n\n                    onChangeFolderIntent={\n                      (folderName) => {\n                        let newPath: string;\n                        if (folderName === FOLDER_LEVEL_UP) {\n                          newPath = path.slice(0, path.lastIndexOf('/'));\n                          if (newPath === '')\n                            newPath = '/';\n                        } else {\n                          newPath = path;\n                          if (newPath !== '/') {\n                            newPath += '/'\n                          }\n                          newPath += encodeURIComponent(folderName);\n                        }\n                        history.push(newPath + '?browse');\n                      }\n                    }\n\n                    onSwitchToViewingIntent={(index) => history.push(history.location.pathname + '?' + index)}\n                  />\n                )\n              } else {\n                return <Gallery\n                  history={history}\n                  path={decodeURIComponent(path)}\n                  index={history.location.search ? parseInt(history.location.search.slice(1)) : 0}\n                  onNoPhotos={() => history.push(history.location.pathname + '?browse')}\n                />\n              }\n            }} />\n\n            <Route render={({ history }) => (\n              <Menu id=\"menu\">\n                {history.location.search !== '?browse' &&\n                  <Item onClick={() => history.push(history.location.pathname + '?browse')}>\n                    Browse\n                    </Item>\n                }\n                {history.location.search !== '?browse' &&\n                  <Separator />\n                }\n                <Item onClick={() => signOut()}>\n                  Sign out\n                  </Item>\n              </Menu>\n            )} />\n          </Router>\n        </MenuProvider>\n      }\n    </Authenticator>\n  );\n\n  async function setSignedCookies(): Promise<void> {\n    const result = await API.graphql(graphqlOperation(getSignedCookies)) as GraphQLResult;\n    const data: GetSignedCookiesQuery = result.data as GetSignedCookiesQuery;\n\n    data.getSignedCookies && data.getSignedCookies.forEach((nameValuePair) => {\n      if (!nameValuePair) {\n        return;\n      }\n      props.cookies.set(\n        nameValuePair.name,\n        nameValuePair.value,\n        {\n          path: '/image',\n          secure: true\n        }\n      );\n    });\n  }\n\n  function signOut(): void {\n    Amplify.Auth.signOut();\n    setIsSignedIn(false);\n  }\n\n}\n\nconst AppWithData: React.FunctionComponent<Props> = (props) => {\n  return (\n    <data.StateProvider>\n      <App {...props} />\n    </data.StateProvider>\n\n  );\n}\n\nexport default withCookies(AppWithData);\n","const isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    window.location.hostname === '[::1]' ||\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        checkValidServiceWorker(swUrl, config);\n        navigator.serviceWorker.ready.then(() => {\n        });\n      } else {\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  fetch(swUrl)\n    .then(response => {\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}